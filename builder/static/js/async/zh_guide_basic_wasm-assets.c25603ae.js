"use strict";(self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).push([[6600],{30896:function(s,e,n){n.r(e),n.d(e,{frontmatter:function(){return l},title:function(){return i},toc:function(){return o}});var r=n(39980);const l=void 0,o=[{id:"\u5f15\u7528\u65b9\u5f0f",text:"\u5f15\u7528\u65b9\u5f0f",depth:2},{id:"\u8f93\u51fa\u76ee\u5f55",text:"\u8f93\u51fa\u76ee\u5f55",depth:2},{id:"\u6dfb\u52a0\u7c7b\u578b\u58f0\u660e",text:"\u6dfb\u52a0\u7c7b\u578b\u58f0\u660e",depth:2}],i="\u5f15\u7528 Wasm \u8d44\u6e90";function c(s){const e=Object.assign({h1:"h1",a:"a",p:"p",div:"div",h2:"h2",button:"button",pre:"pre",code:"code",span:"span"},s.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"\u5f15\u7528-wasm-\u8d44\u6e90",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5f15\u7528-wasm-\u8d44\u6e90",children:"#"}),"\u5f15\u7528 Wasm \u8d44\u6e90"]}),"\n",(0,r.jsx)(e.p,{children:"Builder \u652f\u6301\u5728\u4ee3\u7801\u5f15\u7528 WebAssembly \u8d44\u6e90\u3002"}),"\n",(0,r.jsxs)(e.div,{className:"modern-directive tip",children:[(0,r.jsx)(e.p,{className:"modern-directive-title",children:"\u4ec0\u4e48\u662f WebAssembly"}),(0,r.jsx)(e.div,{className:"modern-directive-content",children:(0,r.jsx)(e.p,{children:"\nWebAssembly\uff08\u7f29\u5199\u4e3a wasm\uff09\u662f\u4e00\u79cd\u53ef\u79fb\u690d\u3001\u9ad8\u6027\u80fd\u7684\u5b57\u8282\u7801\u683c\u5f0f\uff0c\u88ab\u8bbe\u8ba1\u7528\u6765\u5728\u73b0\u4ee3 Web \u6d4f\u89c8\u5668\u4e2d\u6267\u884c CPU \u5bc6\u96c6\u578b\u8ba1\u7b97\u4efb\u52a1\uff0c\u4e3a Web \u5e73\u53f0\u5e26\u6765\u4e86\u63a5\u8fd1\u672c\u5730\u7f16\u8bd1\u4ee3\u7801\u7684\u6027\u80fd\u548c\u53ef\u9760\u6027\u3002"})})]}),"\n",(0,r.jsxs)(e.div,{className:"modern-directive info",children:[(0,r.jsx)(e.p,{className:"modern-directive-title",children:"INFO"}),(0,r.jsx)(e.div,{className:"modern-directive-content",children:(0,r.jsx)(e.p,{children:"\n\u5728\u4f7f\u7528 Rspack \u4f5c\u4e3a\u6253\u5305\u5de5\u5177\u65f6\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u5f15\u7528 Wasm \u8d44\u6e90\u3002"})})]}),"\n",(0,r.jsxs)(e.h2,{id:"\u5f15\u7528\u65b9\u5f0f",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5f15\u7528\u65b9\u5f0f",children:"#"}),"\u5f15\u7528\u65b9\u5f0f"]}),"\n",(0,r.jsx)(e.p,{children:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728 JavaScript \u6587\u4ef6\u4e2d\u5f15\u7528\u4e00\u4e2a WebAssembly \u6a21\u5757\uff1a"}),"\n",(0,r.jsxs)(e.div,{className:"language-js",children:[(0,r.jsx)(e.div,{className:"modern-code-title",children:"index.js"}),(0,r.jsxs)(e.div,{className:"modern-code-content",children:[(0,r.jsx)(e.button,{className:"copy"}),(0,r.jsx)(e.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" { add } "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./add.wasm'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(add); "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// [native code]"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")); "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// 3"})]}),"\n",(0,r.jsx)(e.span,{className:"line"})]})})]})]}),"\n",(0,r.jsx)(e.p,{children:"\u4e5f\u53ef\u4ee5\u901a\u8fc7 Dynamic Import \u6765\u5f15\u7528 WebAssembly \u6a21\u5757\uff1a"}),"\n",(0,r.jsxs)(e.div,{className:"language-js",children:[(0,r.jsx)(e.div,{className:"modern-code-title",children:"index.js"}),(0,r.jsxs)(e.div,{className:"modern-code-content",children:[(0,r.jsx)(e.button,{className:"copy"}),(0,r.jsx)(e.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./add.wasm'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(({ add }) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'---- Async Wasm Module'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(add); "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// [native code]"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")); "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// 3"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,r.jsx)(e.span,{className:"line"})]})})]})]}),"\n",(0,r.jsxs)(e.h2,{id:"\u8f93\u51fa\u76ee\u5f55",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8f93\u51fa\u76ee\u5f55",children:"#"}),"\u8f93\u51fa\u76ee\u5f55"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5f53 ",(0,r.jsx)(e.code,{children:".wasm"})," \u8d44\u6e90\u88ab\u5f15\u7528\u540e\uff0c\u9ed8\u8ba4\u4f1a\u88ab Builder \u8f93\u51fa\u5230 ",(0,r.jsx)(e.code,{children:"dist/static/wasm"})," \u76ee\u5f55\u4e0b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,r.jsx)(e.a,{href:"/builder/api/config-output.html#outputdistpath",children:"output.distPath"})," \u914d\u7f6e\u9879\u6765\u4fee\u6539 ",(0,r.jsx)(e.code,{children:".wasm"})," \u4ea7\u7269\u7684\u8f93\u51fa\u76ee\u5f55\u3002"]}),"\n",(0,r.jsxs)(e.div,{className:"language-ts",children:[(0,r.jsx)(e.div,{className:""}),(0,r.jsxs)(e.div,{className:"modern-code-content",children:[(0,r.jsx)(e.button,{className:"copy"}),(0,r.jsx)(e.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  output"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    distPath"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      wasm"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'resource/wasm'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"};"})}),"\n",(0,r.jsx)(e.span,{className:"line"})]})})]})]}),"\n",(0,r.jsxs)(e.h2,{id:"\u6dfb\u52a0\u7c7b\u578b\u58f0\u660e",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6dfb\u52a0\u7c7b\u578b\u58f0\u660e",children:"#"}),"\u6dfb\u52a0\u7c7b\u578b\u58f0\u660e"]}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u4f60\u5728 TypeScript \u4ee3\u7801\u4e2d\u5f15\u7528 Wasm \u6587\u4ef6\u65f6\uff0c\u901a\u5e38\u9700\u8981\u6dfb\u52a0\u76f8\u5e94\u7684\u7c7b\u578b\u58f0\u660e\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u6bd4\u5982 ",(0,r.jsx)(e.code,{children:"add.wasm"})," \u6587\u4ef6\u5bfc\u51fa\u4e86 ",(0,r.jsx)(e.code,{children:"add()"})," \u65b9\u6cd5\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u5728\u540c\u7ea7\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"add.wasm.d.ts"})," \u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u76f8\u5e94\u7684\u7c7b\u578b\u58f0\u660e\uff1a"]}),"\n",(0,r.jsxs)(e.div,{className:"language-ts",children:[(0,r.jsx)(e.div,{className:"modern-code-title",children:"add.wasm.d.ts"}),(0,r.jsxs)(e.div,{className:"modern-code-content",children:[(0,r.jsx)(e.button,{className:"copy"}),(0,r.jsx)(e.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (num1"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"number"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" num2"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"number"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" number;"})]}),"\n",(0,r.jsx)(e.span,{className:"line"})]})})]})]})]})}e.default=function(s={}){const{wrapper:e}=s.components||{};return e?(0,r.jsx)(e,Object.assign({},s,{children:(0,r.jsx)(c,s)})):c(s)}}}]);