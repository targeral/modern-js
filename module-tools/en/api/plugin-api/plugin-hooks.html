<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/logo-1x-0104.png" /><title data-rh="true">Plugin Hooks - Module Tools</title><meta data-rh="true" name="description" content="Module Engineering Solutions"/><script>!function(){"use strict";var e,n,i,t,o,r={},u={};function a(e){var n=u[e];if(void 0!==n)return n.exports;var i=u[e]={exports:{}};return r[e].call(i.exports,i,i.exports,a),i.exports}a.m=r,e=[],a.O=function(n,i,t,o){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],t=e[d][1],o=e[d][2];for(var u=!0,_=0;_<i.length;_++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](i[_])}))?i.splice(_--,1):(u=!1,o<r&&(r=o));if(u){e.splice(d--,1);var c=t();void 0!==c&&(n=c)}}return n}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,t,o]},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,{a:n}),n},i=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var r={};n=n||[null,i({}),i([]),i(i)];for(var u=2&t&&e;"object"==typeof u&&!~n.indexOf(u);u=i(u))Object.getOwnPropertyNames(u).forEach((function(n){r[n]=function(){return e[n]}}));return r.default=function(){return e},a.d(o,r),o},a.d=function(e,n){for(var i in n)a.o(n,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(n,i){return a.f[i](e,n),n}),[]))},a.u=function(e){return"static/js/async/"+({229:"en_guide_intro_getting-started",237:"zh_api_config_build-config",315:"en_index",421:"zh_api_config_testing",727:"zh_guide_advance_in-depth-about-build",775:"zh_guide_basic_before-getting-started",1085:"en_api_index",1108:"zh_guide_intro_why-module-engineering-solution",1178:"zh_api_plugin-api_plugin-hooks",1180:"zh_guide_advance_theme-config",1189:"zh_api_index",1677:"en_api_plugin-api_plugin-hooks",1756:"zh_guide_basic_command-preview",1895:"zh_index",2013:"zh_guide_best-practices_components",2020:"zh_guide_basic_publish-your-project",2033:"en_guide_intro_welcome",2034:"zh_guide_intro_welcome",2097:"en_api_config_plugins",2532:"en_guide_basic_use-micro-generator",2540:"zh_guide_advance_in-depth-about-dev-command",2556:"en_api_config_testing",2611:"zh_guide_advance_copy",2633:"zh_guide_intro_getting-started",2678:"en_guide_basic_before-getting-started",2821:"zh_guide_basic_modify-output-product",2892:"zh_plugins_guide_setup-function",3032:"en_guide_basic_publish-your-project",3741:"en_guide_basic_test-your-project",3806:"zh_api_config_plugins",4260:"en_guide_advance_external-dependency",4390:"zh_plugins_official-list_overview",4663:"en_guide_advance_build-umd",4695:"zh_api_config_design-system",4749:"en_plugins_guide_setup-function",4837:"zh_guide_advance_build-umd",5057:"en_guide_advance_copy",5107:"zh_guide_basic_using-storybook",5284:"zh_plugins_guide_plugin-object",5300:"en_plugins_guide_plugin-object",5532:"zh_guide_advance_external-dependency",5578:"en_guide_basic_modify-output-product",5654:"en_api_config_build-config",5723:"zh_guide_advance_asset",5966:"zh_guide_basic_test-your-project",6098:"en_guide_advance_theme-config",7241:"zh_api_config_build-preset",7294:"zh_guide_basic_use-micro-generator",7401:"en_guide_best-practices_components",7512:"en_guide_intro_why-module-engineering-solution",7571:"en_guide_basic_command-preview",8230:"en_guide_advance_asset",8687:"en_plugins_guide_getting-started",8782:"en_api_config_build-preset",8927:"en_guide_advance_in-depth-about-build",9220:"en_api_config_design-system",9479:"en_plugins_official-list_overview",9675:"en_guide_basic_using-storybook",9826:"en_guide_advance_in-depth-about-dev-command",9868:"zh_plugins_guide_getting-started"}[e]||e)+"."+{229:"65fb87a3",237:"4a97d6b1",315:"7bd869c4",421:"2cdbd746",727:"3e383137",775:"6e0e3a9a",1085:"669f0a56",1108:"6f8b5ff6",1178:"c0fce81a",1180:"05cbb726",1189:"22957707",1677:"40e2c2cb",1756:"1e176754",1895:"c19f9dcf",2013:"d4e2e76a",2020:"97eb78e7",2033:"9cc45924",2034:"71c3fe16",2097:"e2054c0f",2532:"56325139",2540:"1d5e99ca",2556:"aa466f85",2611:"59aaac64",2633:"f9a76d43",2678:"8651fecd",2821:"86fc7a09",2892:"8f9b7e8e",3032:"c7dfe7ea",3741:"4a37cd19",3799:"e31e8293",3806:"a1b91f8a",4260:"aa1a41b8",4390:"a7635714",4663:"e309aea2",4695:"6956d202",4749:"ae534c52",4837:"b10f089f",5057:"e5250d90",5107:"7c0afc06",5284:"54a7f5d3",5300:"898bd817",5532:"750b0a47",5578:"79d3bdda",5654:"4c7f3911",5723:"8f5263d1",5966:"00a35aa8",6098:"40a38346",7241:"faa2446a",7294:"a091d57d",7401:"af46d650",7512:"7f2dae5c",7571:"502d93e9",8230:"0334d545",8652:"6fbf1cb7",8687:"cdd092af",8782:"7c0c728b",8927:"e912bdda",9220:"2666da95",9479:"84e5cea0",9675:"0ea10fa7",9826:"aec0b4e1",9868:"3c40433f"}[e]+".js"},a.miniCssF=function(e){},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t={},o="@modern-js/module-tools-docs:",a.l=function(e,n,i,r){if(t[e])t[e].push(n);else{var u,_;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var f=c[d];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==o+i){u=f;break}}u||(_=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.setAttribute("data-webpack",o+i),u.src=e),t[e]=[n];var s=function(n,i){u.onerror=u.onload=null,clearTimeout(g);var o=t[e];if(delete t[e],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(e){return e(i)})),n)return n(i)},g=setTimeout(s.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=s.bind(null,u.onerror),u.onload=s.bind(null,u.onload),_&&document.head.appendChild(u)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",function(){var e={6272:0};a.f.j=function(n,i){var t=a.o(e,n)?e[n]:void 0;if(0!==t)if(t)i.push(t[2]);else if(6272!=n){var o=new Promise((function(i,o){t=e[n]=[i,o]}));i.push(t[2]=o);var r=a.p+a.u(n),u=new Error;a.l(r,(function(i){if(a.o(e,n)&&(0!==(t=e[n])&&(e[n]=void 0),t)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;u.message="Loading chunk "+n+" failed.\n("+o+": "+r+")",u.name="ChunkLoadError",u.type=o,u.request=r,t[1](u)}}),"chunk-"+n,n)}else e[n]=0},a.O.j=function(n){return 0===e[n]};var n=function(n,i){var t,o,r=i[0],u=i[1],_=i[2],c=0;if(r.some((function(n){return 0!==e[n]}))){for(t in u)a.o(u,t)&&(a.m[t]=u[t]);if(_)var d=_(a)}for(n&&n(i);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},i=self.webpackChunk_modern_js_module_tools_docs=self.webpackChunk_modern_js_module_tools_docs||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}()}();</script><script defer="defer" src="/static/js/lib-polyfill.b3038509.js"></script><script defer="defer" src="/static/js/lib-lodash.c5845536.js"></script><script defer="defer" src="/static/js/lib-react.d41ace5e.js"></script><script defer="defer" src="/static/js/1607.8a19f77e.js"></script><script defer="defer" src="/static/js/main.2d3257a4.js"></script><link href="/static/css/main.edaad072.css" rel="stylesheet"></head><body><div id="root"><div style="height:100%"><header class="top-0 left-0 relative md:fixed w-full" style="border-bottom:1px solid var(--modern-c-divider-light);z-index:var(--modern-z-index-nav)"><div class="J5RhI modern-doc-nav" p="x-6"><div flex="~" justify="between" align="items-center" h="full" class="Be7Bu"><div class="undefined"><a href="/module-tools/en" w="full" h="full" text="1rem" font="semibold" transition="opacity duration-300" hover="opacity-60" class="flex items-center"><span>Module Tools</span></a></div><div flex="~ 1" justify="end" align-items-center="~"><div class="fxz4T"><div class="search" flex="sm:1" p="sm:l-8"><div flex="~" align="items-center" pos="relative" m="r-2" font="semibold"><svg width="32" height="32" viewBox="0 0 32 32" w="5" h="5" fill="currentColor"><path fill="#888888" d="m29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9Z"></path></svg><input disabled="" cursor="text focus:auto" placeholder="Search" height="8" border="none" type="text" text="sm" p="t-0 r-2 b-0 l-2" transition="all duration-200 ease" class="rounded-sm SjSZ2 " aria-label="Search" autoComplete="off"/><div m="r-3" w="10" h="6" p="x-1.5" border="1px solid gray-light-3 rounded-md" text="xs gray-light-3" flex="~" align="items-center" justify="around" class="iUJv9"><span>⌘</span><span>K</span></div></div></div><div class="menu" h="14"><div text="sm" font="medium" m="x-3" class=""><a class="R5q4o " target="" cursor="pointer" href="/module-tools/en/guide/intro/welcome.html">Guide</a></div><div text="sm" font="medium" m="x-3" class="text-brand"><a class="R5q4o " target="" cursor="pointer" href="/module-tools/en/api/index.html">API</a></div><div text="sm" font="medium" m="x-3" class=""><a class="R5q4o " target="" cursor="pointer" href="/module-tools/en/plugins/guide/getting-started.html">Plugins</a></div><div m="x-3" last="mr-0"><div h="14" class="relative" flex="~ center"><button flex="~ center" align="items-center" font="medium" text="sm text-1 hover:text-2" transition="color duration-200" class="nav-menu-group-button"><span m="r-1" text="sm" font="medium">v2.2.0</span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"></path></svg></button><div pos="top-13 right-0" m="x-0.8" transition="opacity duration-300" class="nav-menu-group-content absolute" style="opacity:0;visibility:hidden"><div p="3" w="full" h="full" class="min-w-128px max-h-100vh rounded-xl whitespace-nowrap" bg="white" style="box-shadow:var(--modern-shadow-3);margin-right:-1.5rem;z-index:100;border:1px solid var(--modern-c-divider-light)"><div font="medium"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/solutions/module-tools/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="R5q4o "><div class="rounded-md" hover="bg-mute" p="y-1.6 l-3 r-6"><div flex="~"><span m="r-1">Changelog<svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1 l-1" class="inline-block align-text-top"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></span></div></div></a></div><div font="medium"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/solutions/module-tools/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="R5q4o "><div class="rounded-md" hover="bg-mute" p="y-1.6 l-3 r-6"><div flex="~"><span m="r-1">Contributing<svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1 l-1" class="inline-block align-text-top"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></span></div></div></a></div></div></div></div></div></div><div flex="~" text="sm" font="bold" align="items-center" class="translation WjR05"><div m="x-1.5"><div h="14" class="relative" flex="~ center"><button flex="~ center" align="items-center" font="medium" text="sm text-1 hover:text-2" transition="color duration-200" class="nav-menu-group-button"><span m="r-1" text="sm" font="medium"><svg width="32" height="32" viewBox="0 0 32 32" w="18px" h="18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6l2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"></path></svg></button><div pos="top-13 right-0" m="x-0.8" transition="opacity duration-300" class="nav-menu-group-content absolute" style="opacity:0;visibility:hidden"><div p="3" w="full" h="full" class="min-w-128px max-h-100vh rounded-xl whitespace-nowrap" bg="white" style="box-shadow:var(--modern-shadow-3);margin-right:-1.5rem;z-index:100;border:1px solid var(--modern-c-divider-light)"><div font="medium"><a class="R5q4o " target="" cursor="pointer" href="/module-tools/api/plugin-api/plugin-hooks"><div class="rounded-md" hover="bg-mute" p="y-1.6 l-3 r-6"><div flex="~"><span m="r-1">简体中文<svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1 l-1" class="inline-block align-text-top"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></span></div></div></a></div><div class="rounded-md" p="y-1.6 l-3"><span m="r-1" text="brand">English</span></div></div></div></div></div></div><div class="WjR05 modern-doc-appearance" display="none sm:flex" align-items-center="center"><button class="DdK0_ undefined" id="" type="button" role="switch"><span class="WLpap"><span class="Q_Ula"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="JMkpU"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="tgdgB"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div><div class="social-links FU7nx" nav-h="mobile sm:desktop" flex="~" align-items-center="~" pos="relative"><div h="full" flex="~" gap="x-4" align-items-center="~" transition="color duration-300"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/solutions/module-tools" target="_blank" rel="noopener noreferrer"><div class="_8YjQ"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div><button class=" wzxr1"><span class="kECx4"><span class="wzOB6"></span><span class="coO8e"></span><span class="RrwJk"></span></span></button><div class="NeczB " id="navScreen"><div class="WLObZ"><div class="_3YuLy"><div w="full" class="osgV9"><div text="sm" font="medium" m="x-3" class=""><a class="R5q4o " target="" cursor="pointer" href="/module-tools/en/guide/intro/welcome.html">Guide</a></div></div><div w="full" class="osgV9"><div text="sm" font="medium" m="x-3" class="text-brand"><a class="R5q4o " target="" cursor="pointer" href="/module-tools/en/api/index.html">API</a></div></div><div w="full" class="osgV9"><div text="sm" font="medium" m="x-3" class=""><a class="R5q4o " target="" cursor="pointer" href="/module-tools/en/plugins/guide/getting-started.html">Plugins</a></div></div><div w="full" class="osgV9"><div m="x-3" last="mr-0"><div pos="relative" class=" Tk5bz"><button class="X7ejb"><span class="IOfpr">v2.2.0</span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" uavm2 "><path fill="currentColor" d="M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"></path></svg></button><div><div class="ciUdc"><div class="pa-1" font="medium"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/solutions/module-tools/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="R5q4o "><div><div flex="~"><span m="r-1">Changelog</span><svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></div></div></a></div><div class="pa-1" font="medium"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/solutions/module-tools/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="R5q4o "><div><div flex="~"><span m="r-1">Contributing</span><svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></div></div></a></div></div></div></div></div></div></div><div class="rp9pY" flex="~" justify="center" align-items-center="center"><div class="align-items-center appearance pa-2 ctzdQ" flex="~" justify="center"><button class="DdK0_ undefined" id="" type="button" role="switch"><span class="WLpap"><span class="Q_Ula"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="JMkpU"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="tgdgB"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div><div flex="~" text="sm" font="bold" justify="center"><div m="x-1.5"><div pos="relative" class=" Tk5bz"><button class="X7ejb"><span class="IOfpr"><svg width="32" height="32" viewBox="0 0 32 32" w="18px" h="18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6l2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" uavm2 "><path fill="currentColor" d="M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"></path></svg></button><div><div class="ciUdc"><div class="pa-1" font="medium"><a class="R5q4o " target="" cursor="pointer" href="/module-tools/zh"><div><div flex="~"><span m="r-1">简体中文</span><svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></div></div></a></div><div class="pa-1"><span m="r-1" text="brand">English</span></div></div></div></div></div></div><div class="social-links FU7nx" nav-h="mobile sm:desktop" flex="~" align-items-center="~" pos="relative"><div h="full" flex="~" gap="x-4" align-items-center="~" transition="color duration-300"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/solutions/module-tools" target="_blank" rel="noopener noreferrer"><div class="_8YjQ"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div></div></div></header><section><div p="t-0" m="md:t-14" class="Q34AI"><div class="_aGGP"><button flex="~ center" class="wNUbj"><div text="md" m="r-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span text="sm">Menu</span></button></div><aside class="UroNu "><nav m="t-1"><section block="~" class="mt-1"><div flex="~" justify="between" items-start="~" cursor="pointer" class="items-center r3Oz1"><h2 p="y-1 x-2" text="sm" font="semibold">Config</h2><div p="2" class="BgJSm"><div cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16L12 26l-1.4-1.4l8.6-8.6l-8.6-8.6L12 6z"></path></svg></div></div></div><div style="transition:height 0.2s ease-in-out;overflow:hidden;height:160px"><div m="last:b-0.5 l-4"><a class="R5q4o EZlU3" target="" cursor="pointer" href="/module-tools/en/api/config/build-config.html"><div m="t-1" p="y-1 x-2" block="~" border="rounded-sm" font-medium="~" class="r3Oz1" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">BuildConfig</div></a></div><div m="last:b-0.5 l-4"><a class="R5q4o EZlU3" target="" cursor="pointer" href="/module-tools/en/api/config/build-preset.html"><div m="t-1" p="y-1 x-2" block="~" border="rounded-sm" font-medium="~" class="r3Oz1" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">BuildPreset</div></a></div><div m="last:b-0.5 l-4"><a class="R5q4o EZlU3" target="" cursor="pointer" href="/module-tools/en/api/config/design-system.html"><div m="t-1" p="y-1 x-2" block="~" border="rounded-sm" font-medium="~" class="r3Oz1" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">DesignSystem</div></a></div><div m="last:b-0.5 l-4"><a class="R5q4o EZlU3" target="" cursor="pointer" href="/module-tools/en/api/config/plugins.html"><div m="t-1" p="y-1 x-2" block="~" border="rounded-sm" font-medium="~" class="r3Oz1" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Plugins</div></a></div><div m="last:b-0.5 l-4"><a class="R5q4o EZlU3" target="" cursor="pointer" href="/module-tools/en/api/config/testing.html"><div m="t-1" p="y-1 x-2" block="~" border="rounded-sm" font-medium="~" class="r3Oz1" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Testing</div></a></div></div></section><section block="~" class="mt-1"><div flex="~" justify="between" items-start="~" cursor="pointer" class="items-center r3Oz1"><h2 p="y-1 x-2" text="sm" font="semibold">Plugin API</h2><div p="2" class="BgJSm"><div cursor-pointer="~" style="transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16L12 26l-1.4-1.4l8.6-8.6l-8.6-8.6L12 6z"></path></svg></div></div></div><div style="transition:height 0.2s ease-in-out;overflow:hidden;height:32px"><div m="last:b-0.5 l-4"><a class="R5q4o EZlU3" target="" cursor="pointer" href="/module-tools/en/api/plugin-api/plugin-hooks.html"><div m="t-1" p="y-1 x-2" block="~" border="rounded-sm" font-medium="~" class="RCb_U" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Plugin Hooks</div></a></div></div></section><a class="R5q4o EZlU3" target="" cursor="pointer" href="/module-tools/en/api/index.html"><div m="t-1" p="y-1 x-2" block="~" border="rounded-sm" font-medium="~" class="r3Oz1" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Overview</div></a></nav></aside><div flex="~ shrink-0" class="TP8A7"><div w="full"><div class="modern-doc"><!--$--><h1 id="plugin-hooks"><a class="header-anchor" aria-hidden="true" href="#plugin-hooks">#</a>Plugin Hooks</h1>
<p>This chapter describes the lifecycle hooks supported by module-tools.</p>
<p>Currently there are two main types of lifecycle hooks.</p>
<ul>
<li>Build hooks: triggered only when the <code>build</code> command is executed to build the source code product.</li>
<li><code>buildPlatform</code> hook: triggered only when the <code>build --platform</code> command is executed to generate other build products.</li>
<li>dev hooks: hooks that are triggered when running the <code>dev</code> command.</li>
</ul>
<h2 id="build-hooks"><a class="header-anchor" aria-hidden="true" href="#build-hooks">#</a>build hooks</h2>
<p>The following Hooks are triggered in order when the <code>build</code> command is executed.</p>
<ul>
<li><code>beforeBuild</code></li>
<li><code>beforeBuildTask</code></li>
<li><code>afterBuildTask</code></li>
<li><code>afterBuild</code></li>
</ul>
<h3 id="beforebuild"><a class="header-anchor" aria-hidden="true" href="#beforebuild">#</a><code>beforeBuild</code></h3>
<p>Triggered before the execution of the overall build process.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      beforeBuild(options: Options): Return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        return options.config;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Parameters and return value types.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>type Options = { options: { config: BuildConfig; cliOptions: BuildCommandOptions } }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>export interface BuildCommandOptions {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  config: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  clear?: boolean;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  dts?: boolean;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  platform?: boolean | string[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  tsconfig: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  watch?: boolean;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>type Return = BuildConfig;</span></div></div><br/></code></div></div>
<blockquote>
<p><code>BuildConfig</code> type reference <a href="/module-tools/en/api/index.html">API configuration</a></p>
</blockquote>
<h3 id="beforebuildtask"><a class="header-anchor" aria-hidden="true" href="#beforebuildtask">#</a><code>beforeBuildTask</code></h3>
<p>Based on the build configuration, Module Tools will split the overall build into multiple sub-build tasks. The Hook will be triggered before each build subtask.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      beforeBuildTask(config: BaseBuildConfig): BaseBuildConfig {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        return config;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Parameters and return value types.</p>
<p><code>BaseBuildConfig</code> type reference <a href="/module-tools/en/api/index.html">API configuration</a></p>
<h3 id="afterbuildtask"><a class="header-anchor" aria-hidden="true" href="#afterbuildtask">#</a><code>afterBuildTask</code></h3>
<p>Triggered after the end of each build subtask.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      afterBuildTask(options: BuildTaskResult): void {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // ...</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Parameters and return value types.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface BuildTaskResult {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  status: &#x27;success&#x27; | &#x27;fail&#x27;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  message?: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  config: BaseBuildConfig;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h3 id="afterbuild"><a class="header-anchor" aria-hidden="true" href="#afterbuild">#</a><code>afterBuild</code></h3>
<p>Triggered after the end of the overall build process.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      afterBuild(options: BuildResult): void {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // ...</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Parameters and return value types.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface BuildResult {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  status: &#x27;success&#x27; | &#x27;fail&#x27;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  message?: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  config: BuildConfig;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  commandOptions: BuildCommandOptions;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  totalDuration: number;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h2 id="buildplatform-hooks"><a class="header-anchor" aria-hidden="true" href="#buildplatform-hooks">#</a>buildPlatform hooks</h2>
<p>module-tools also provides the <code>build --platform</code> command to perform specific build tasks.</p>
<p>For example, after installing the Storybook plugin, you can run <code>build --platform</code> or <code>build --platform storybook</code> to perform Storybook build tasks. This is because the Storybook plugin is based on the buildPlatform Hooks.</p>
<p>Hooks are triggered in the following order after executing <code>build --platform</code>.</p>
<ul>
<li><code>registerBuildPlatform</code></li>
<li><code>beforeBuildPlatform</code></li>
<li><code>buildPlatform</code></li>
<li><code>afterBuildPlatform</code></li>
</ul>
<h3 id="registerbuildplatform"><a class="header-anchor" aria-hidden="true" href="#registerbuildplatform">#</a><code>registerBuildPlatform</code></h3>
<p>Gets information about the tasks that need to be run when executing the <code>build --platform</code> command.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      registerBuildPlatform(): RegisterBuildPlatformResult {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // ...</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          platform: &#x27;stroybook&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          build() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            // run storybook logic</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }, };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface RegisterBuildPlatformResult {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  platform: string | string[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  build: (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    currentPlatform: string, // the currently running platform build task</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    context: { isTsProject: boolean },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ) =&gt; void | Promise&lt;void&gt;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h3 id="beforebuildplatform"><a class="header-anchor" aria-hidden="true" href="#beforebuildplatform">#</a><code>beforeBuildPlatform</code></h3>
<p>Triggers all registered build tasks when the <code>build --platform</code> command is executed. <code>beforeBuildPlatform</code> will be triggered before the execution of the overall build task.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      beforeBuildPlatform(platforms: RegisterBuildPlatformResult[]): void {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        console.info(`have ${platforms.length} platform tasks`);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface RegisterBuildPlatformResult {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  platform: string | string[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  build: (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    currentPlatform: string, // the currently running platform build task</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    context: { isTsProject: boolean },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ) =&gt; void | Promise&lt;void&gt;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h3 id="buildplatform"><a class="header-anchor" aria-hidden="true" href="#buildplatform">#</a><code>buildPlatform</code></h3>
<p>When the <code>build --platform</code> command is executed, all registered build tasks will be triggered. <code>buildPlatform</code> will be triggered before each build task is executed.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      buildPlatform({ platform }: Options): void {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        console.info(`current task is ${platform}`);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface Options {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  platform: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h3 id="afterbuildplatform"><a class="header-anchor" aria-hidden="true" href="#afterbuildplatform">#</a><code>afterBuildPlatform</code></h3>
<p>When the <code>build --platform</code> command is executed, all registered build tasks will be triggered. <code>afterBuildPlatform</code> will be triggered after the overall platform build task is finished.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      afterBuildPlatform(result: BuildPlatformResult): void {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        if (result.status === &#x27;success&#x27;) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          console.info(`all platform build task success`);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        } else {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          console.error(result.message);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface BuildPlatformResult {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  status: &#x27;success&#x27; | &#x27;fail&#x27;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  message: string | Error | null;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h2 id="dev-hooks"><a class="header-anchor" aria-hidden="true" href="#dev-hooks">#</a>Dev Hooks</h2>
<p>The following Hooks are triggered in order when the <code>dev</code> command is executed.</p>
<ul>
<li><code>registerDev</code>: triggered when getting dev function information.</li>
<li><code>beforeDev</code>: Triggered before starting the dev process as a whole.</li>
<li><code>beforeDevMenu</code>: triggered before the dev list/menu appears.</li>
<li><code>afterDevMenu</code>: triggered after dev list/menu option is selected.</li>
<li><code>beforeDevTask</code>: Triggered before executing the dev task.</li>
<li><code>afterDev</code>: Triggered at the end of the overall dev process.</li>
</ul>
<h3 id="registerdev"><a class="header-anchor" aria-hidden="true" href="#registerdev">#</a><code>registerDev</code>.</h3>
<p>Register dev tool related data. Mainly contains.</p>
<ul>
<li>the name of the dev tool</li>
<li>The name of the item displayed in the menu list and the corresponding value.</li>
<li>The definition of the <code>dev</code> subcommand.</li>
<li>Whether to execute the source code build before running the dev task</li>
<li>The function to execute the dev task.</li>
</ul>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      registerDev() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          // Dev tool name</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          name: &#x27;storybook&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          // Menu content</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          menuItem: {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            name: &#x27;Storybook&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            value: &#x27;storybook&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          // Defined dev subcommands</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          subCommands: [&#x27;storybook&#x27;, &#x27;story&#x27;],</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          async action() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            // dev logic</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>          },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface DevToolData {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  subCommands?: string[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  menuItem?: {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    value: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  // Whether to disable the source build before the dev command is executed</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  disableRunBuild?: boolean;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  action: (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    options: { port?: string },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    context: { isTsProject?: boolean },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ) =&gt; void | Promise&lt;void&gt;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<div class="modern-directive tip"><p class="modern-directive-title">About disableRunBuild configuration</p><div class="modern-directive-content"><p>
When dev a project, it may be possible to set <code>disableRunBuild: true</code> to disable build tasks for source execution (in listening mode) if you only need to dev code functionality.</p>The currently supported Storybook dev supports using source code products as dev objects, so <code>disableRunBuild: false</code><p>in the Storybook plugin.</p></div></div>
<h3 id="beforedev"><a class="header-anchor" aria-hidden="true" href="#beforedev">#</a><code>beforeDev</code></h3>
<p>Triggered before the dev task is executed after all dev tool metadata has been collected.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      beforeDev(metas: DevToolData[]) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        console.info(`have ${metas.length} dev tools`);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface DevToolData {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  subCommands?: string[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  menuItem?: {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    value: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  // Whether to disable the source build before the dev command is executed</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  disableRunBuild?: boolean;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  action: (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    options: { port?: string },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    context: { isTsProject?: boolean },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ) =&gt; void | Promise&lt;void&gt;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h3 id="beforeafterdevmenu"><a class="header-anchor" aria-hidden="true" href="#beforeafterdevmenu">#</a><code>(before|after)DevMenu</code></h3>
<p><code>beforeDevMenu</code> is triggered before the dev list/menu appears. Receives <a href="https://github.com/SBoudrias/Inquirer.js#question" target="_blank" rel="nofollow">inquirer question</a> as argument. Default value is.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>const question = [</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    name: &#x27;choiceDevTool&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    message: &#x27;Select dev tool&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    type: &#x27;list&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    // Registered dev messages</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    choices,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>];</span></div></div><br/></code></div></div>
<p><code>afterDevMenu</code> Triggered after selecting dev list/menu options.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      beforeDevMenu(questions) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        questions[0].message += &#x27;!&#x27; ;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        return questions; // required</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      afterDevMenu(options: Options) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        console.info(`choise ${options.result.choiceDevTool} dev tools`);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export type { QuestionCollection } from &#x27;inquirer&#x27;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>export interface Options {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  result: PromptResult;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  devTools: DevToolData[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>export type PromptResult = { choiceDevTool: string }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>export interface DevToolData {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  subCommands?: string[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  menuItem?: {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    value: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  // Whether to disable the source build before the dev command is executed</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  disableRunBuild?: boolean;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  action: (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    options: { port?: string },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    context: { isTsProject?: boolean },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ) =&gt; void | Promise&lt;void&gt;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h3 id="beforedevtask"><a class="header-anchor" aria-hidden="true" href="#beforedevtask">#</a><code>beforeDevTask</code></h3>
<p>Triggered before the dev task is executed.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      beforeDevTask(currentDevData: DevToolData) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        console.info(`${currentDevData.name} running`);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Types of parameters entered and returned.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export interface DevToolData {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  subCommands?: string[];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  menuItem?: {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    name: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    value: string;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  // Whether to disable the source build before the dev command is executed</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  disableRunBuild?: boolean;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  action: (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    options: { port?: string },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    context: { isTsProject?: boolean },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ) =&gt; void | Promise&lt;void&gt;;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<h3 id="afterdev"><a class="header-anchor" aria-hidden="true" href="#afterdev">#</a><code>afterDev</code></h3>
<p>Triggered when the dev task process is interrupted.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>export default (): CliPlugin&lt;ModuleTools&gt; =&gt; ({</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  name: &#x27;my-plugin&#x27;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  setup() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    return {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      afterDev() {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        console.info(`exit!`);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  },</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div><!--/$--><div><footer m="t-8"><div flex="~ col sm:row" justify="sm:around" gap="2" p="t-6"><div flex="~ col" class="ajVjQ"><a class="R5q4o pAnzs" target="" cursor="pointer" href="/module-tools/en/api/config/testing.html"><span class="rVEMI">Previous Page</span><span class="jr5Zr">Testing</span></a></div><div flex="~ col" class="A2aco"><a class="R5q4o pAnzs A2aco" target="" cursor="pointer" href="/module-tools/en/api/index.html"><span class="rVEMI">Next page</span><span class="jr5Zr">Overview</span></a></div></div></footer></div></div></div><div class="RsCtL" style="min-height:calc(100vh - (var(--modern-nav-height) + 32px))"><div><div flex="~ col"><div class="&lt;lg:hidden"><div p="l-4" text="sm" font-medium="~" id="aside-container" style="border-left:1px solid var(--modern-c-divider-light)" class="relative"><div class="absolute" opacity="0" w="1px" h="18px" bg="brand" style="top:33px;left:-1px;transition:top 0.25s cubic-bezier(0, 1, 0.5, 1), background-color 0.5s, opacity 0.25s" id="aside-marker"></div><div block="~" class="leading-7" text="sm" font="semibold">ON THIS PAGE</div><nav><ul class="relative"><li><a href="#build-hooks" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">build hooks</a></li><li><a href="#beforebuild" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">beforeBuild</a></li><li><a href="#beforebuildtask" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">beforeBuildTask</a></li><li><a href="#afterbuildtask" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">afterBuildTask</a></li><li><a href="#afterbuild" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">afterBuild</a></li><li><a href="#buildplatform-hooks" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">buildPlatform hooks</a></li><li><a href="#registerbuildplatform" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">registerBuildPlatform</a></li><li><a href="#beforebuildplatform" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">beforeBuildPlatform</a></li><li><a href="#buildplatform" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">buildPlatform</a></li><li><a href="#afterbuildplatform" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">afterBuildPlatform</a></li><li><a href="#dev-hooks" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Dev Hooks</a></li><li><a href="#registerdev" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">registerDev.</a></li><li><a href="#beforedev" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">beforeDev</a></li><li><a href="#beforeafterdevmenu" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">(before|after)DevMenu</a></li><li><a href="#beforedevtask" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">beforeDevTask</a></li><li><a href="#afterdev" block="~" text="text-2" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">afterDev</a></li></ul></nav></div></div></div></div></div></div></div></section></div></div></body></html>