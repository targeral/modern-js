(self.webpackChunk_modern_js_doc_tools_doc=self.webpackChunk_modern_js_doc_tools_doc||[]).push([["docs_en_advanced_plugin-system_mdx"],{42781:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e,n){for(var s in n)Object.defineProperty(e,s,{enumerable:!0,get:n[s]})}(n,{frontmatter:function(){return l},title:function(){return o},toc:function(){return t},default:function(){return c}});var i=s("12151"),a=s("23169"),l={},o="Plugin System",t=[{text:"A simple plugin example",depth:2,id:"a-simple-plugin-example"},{text:"1. Define a plugin",depth:3,id:"1--define-a-plugin"},{text:"2. Use the plugin",depth:3,id:"2--use-the-plugin"},{text:"Plugin API",depth:2,id:"plugin-api"},{text:"1. globalStyles",depth:3,id:"1--globalstyles"},{text:"2. globalUIComponents",depth:3,id:"2--globaluicomponents"},{text:"3. builderConfig",depth:3,id:"3--builderconfig"},{text:"4. config",depth:3,id:"4--config"},{text:"5. beforeBuild",depth:3,id:"5--beforebuild"},{text:"6. afterBuild",depth:3,id:"6--afterbuild"},{text:"7. markdown",depth:3,id:"7--markdown"},{text:"8. extendPageData",depth:3,id:"8--extendpagedata"}];function d(e){var n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",div:"div",button:"button",pre:"pre",code:"code",ul:"ul",li:"li"},(0,a.useMDXComponents)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"plugin-system",children:["Plugin System",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plugin-system",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"In order to ensure the scalability of the framework, we provide a plugin system, through which you can implement many custom functions."}),"\n",(0,i.jsxs)(n.h2,{id:"a-simple-plugin-example",children:["A simple plugin example",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#a-simple-plugin-example",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"We inject a global component as an example to see how to define and use plugins."}),"\n",(0,i.jsxs)(n.h3,{id:"1--define-a-plugin",children:["1. Define a plugin",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1--define-a-plugin",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginMonitor(slug: string): DocPlugin {\n  // component path\n  const componentPath = path.join(__dirname, 'some-component.tsx');\n  return {\n    // plugin name\n    name: 'plugin-monitor',\n    // global component path\n    globalUIComponents: [componentPath],\n    // extend Modern.js Builder's build ability\n    builderConfig: {\n      source: {\n        define: {\n          SLUG: JSON.stringify(slug),\n        },\n      },\n    },\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"2--use-the-plugin",children:["2. Use the plugin",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2--use-the-plugin",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"modern.config.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="modern.config.ts"',children:"import { pluginMonitor } from './plugin';\n\nexport default {\n  doc: {\n    plugins: [pluginMonitor('test')],\n  },\n};\n"})})]})]}),"\n",(0,i.jsxs)(n.h2,{id:"plugin-api",children:["Plugin API",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plugin-api",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["In the above example, we use ",(0,i.jsx)(n.code,{children:"globalComponents"})," to inject a global component, and use ",(0,i.jsx)(n.code,{children:"builderConfig"})," to extend the build config of ",(0,i.jsx)(n.a,{href:"https://modernjs.dev/builder/",target:"_blank",rel:"noopener noreferrer",children:"Modern.js Builder"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"However, these are only part of the plug-in capabilities. We can sort out the plugin abilities of Modern.js Doc:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#1-globalstyles",children:"globalStyles"}),": inject global styles."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#2-globaluicomponents",children:"globalUIComponents"}),": inject global components."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#3-builderconfig",children:"builderConfig"}),": extend the build config of Modern.js Builder."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#4-config",children:"config"}),": extend the config of Modern.js Doc itself."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#5-beforebuild",children:"beforeBuild"}),": hook before build."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#6-afterbuild",children:"afterBuild"}),": hook after build."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#7-markdown",children:"markdown"}),": extend the Markdown/MDX compile ability."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Then we will introduce each of these abilities."}),"\n",(0,i.jsxs)(n.h3,{id:"1--globalstyles",children:["1. globalStyles",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1--globalstyles",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(): DocPlugin {\n  // style path\n  const stylePath = path.join(__dirname, 'some-style.css');\n  return {\n    // plugin name\n    name: 'plugin-name',\n    // global style path\n    globalStyles: [stylePath],\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"2--globaluicomponents",children:["2. globalUIComponents",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2--globaluicomponents",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(): DocPlugin {\n  // component path\n  const componentPath = path.join(__dirname, 'some-component.tsx');\n  return {\n    name: 'plugin-name',\n    // global component path\n    globalUIComponents: [componentPath],\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"3--builderconfig",children:["3. builderConfig",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3--builderconfig",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(slug: string): DocPlugin {\n  return {\n    name: 'plugin-name',\n    // extend Modern.js Builder's build ability\n    builderConfig: {\n      source: {\n        define: {\n          SLUG: JSON.stringify(slug),\n        },\n      },\n    },\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"4--config",children:["4. config",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4--config",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(): DocPlugin {\n  return {\n    name: 'plugin-name',\n    config(config) {\n      return {\n        ...config,\n        // Here you can extend the config of Modern.js Doc\n      };\n    },\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"5--beforebuild",children:["5. beforeBuild",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#5--beforebuild",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(): DocPlugin {\n  return {\n    name: 'plugin-name',\n    // Hook to execute before build\n    beforeBuild() {\n      // do something\n    },\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"6--afterbuild",children:["6. afterBuild",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#6--afterbuild",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(): DocPlugin {\n  return {\n    name: 'plugin-name',\n    // Hooks to execute after build\n    afterBuild() {\n      // do something\n    },\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"7--markdown",children:["7. markdown",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#7--markdown",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(): DocPlugin {\n  return {\n    name: 'plugin-name',\n    // Extend the Markdown/MDX compile ability\n    markdown: {\n      remarkPlugins: [\n        // Add custom remark plugins\n      ],\n      rehypePlugins: [\n        // Add custom rehype plugins\n      ],\n    },\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"8--extendpagedata",children:["8. extendPageData",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#8--extendpagedata",children:"#"})]}),"\n",(0,i.jsxs)(n.div,{className:"language-",children:[(0,i.jsx)(n.div,{className:"modern-code-title",children:"plugin.ts"}),(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="plugin.ts"',children:"import { DocPlugin } from '@modern-js/doc-tools';\n\nexport function pluginForDoc(): DocPlugin {\n  return {\n    name: 'plugin-name',\n    // Extend the page data\n    extendPageData(pageData) {\n      // You can add or modify properties on the pageData object\n      pageData.a = 1;\n    },\n  };\n}\n"})})]})]}),"\n",(0,i.jsxs)(n.p,{children:["After extending the page data, you can access the page data through the ",(0,i.jsx)(n.code,{children:"usePageData"})," hook in the theme."]}),"\n",(0,i.jsx)(n.div,{className:"language-",children:(0,i.jsxs)(n.div,{className:"modern-code-content",children:[(0,i.jsx)(n.button,{className:"copy"}),(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { usePageData } from '@modern-js/doc-tools';\n\nexport function MyComponent() {\n  const { page } = usePageData();\n  // page.a === 1\n  return <div>{page.a}</div>;\n}\n"})})]})}),"\n",(0,i.jsxs)(n.div,{className:"modern-directive tip",children:[(0,i.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,i.jsx)(n.div,{className:"modern-directive-content",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"extendPageData"})," function supports declaration as an ",(0,i.jsx)(n.code,{children:"async"})," function.\n"]})})]})]})}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,a.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(d,e)})):d(e)}}}]);