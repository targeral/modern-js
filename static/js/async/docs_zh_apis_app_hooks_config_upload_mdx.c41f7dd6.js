(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["docs_zh_apis_app_hooks_config_upload_mdx"],{77391:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});!function(e,s){for(var n in s)Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}(s,{frontmatter:function(){return r},title:function(){return i},toc:function(){return a},default:function(){return o}});var c=n("12151"),d=n("23169"),r={title:"upload/",sidebar_position:4},i="upload/",a=[{text:"说明",depth:2,id:"说明"},{text:"场景",depth:2,id:"场景"},{text:"代码压缩",depth:2,id:"代码压缩"},{text:"更多用法",depth:2,id:"更多用法"}];function l(e){var s=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",div:"div",button:"button",pre:"pre"},(0,d.useMDXComponents)(),e.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(s.h1,{id:"upload/",children:["upload/",(0,c.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#upload/",children:"#"})]}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.code,{children:"upload/"})," 目录中可以放置任意格式的静态资源文件。"]}),"\n",(0,c.jsxs)(s.h2,{id:"说明",children:["说明",(0,c.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#说明",children:"#"})]}),"\n",(0,c.jsxs)(s.p,{children:["在开发环境下，该目录下的静态资源文件会被托管在 ",(0,c.jsx)(s.code,{children:"/upload"})," 路径下。构建应用产物后，该目录下的文件会被复制到产物目录中。"]}),"\n",(0,c.jsx)(s.p,{children:"该文件约定主要用于开发者使用插件，主动上传静态资源文件到 CDN。"}),"\n",(0,c.jsxs)(s.h2,{id:"场景",children:["场景",(0,c.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#场景",children:"#"})]}),"\n",(0,c.jsxs)(s.p,{children:["例如 ",(0,c.jsx)(s.code,{children:"google-analysis.js"})," 等项目自用的 SDK（通常需要 http 缓存）。"]}),"\n",(0,c.jsx)(s.p,{children:"图片、字体文件、通用 CSS 等。"}),"\n",(0,c.jsxs)(s.h2,{id:"代码压缩",children:["代码压缩",(0,c.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#代码压缩",children:"#"})]}),"\n",(0,c.jsxs)(s.p,{children:["如果目录下的文件是一个 ",(0,c.jsx)(s.code,{children:".js"})," 文件，在生产环境构建时，会自动对其进行代码压缩。"]}),"\n",(0,c.jsxs)(s.p,{children:["如果该文件以 ",(0,c.jsx)(s.code,{children:".min.js"})," 结尾，则不会经过代码压缩处理。"]}),"\n",(0,c.jsxs)(s.h2,{id:"更多用法",children:["更多用法",(0,c.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#更多用法",children:"#"})]}),"\n",(0,c.jsxs)(s.p,{children:["在 React 组件中，可以通过",(0,c.jsx)(s.a,{href:"/guides/basic-features/env-vars",children:"内置环境变量"}),"来添加该前缀："]}),"\n",(0,c.jsx)(s.div,{className:"language-",children:(0,c.jsxs)(s.div,{className:"modern-code-content",children:[(0,c.jsx)(s.button,{className:"copy"}),(0,c.jsx)(s.pre,{className:"code",children:(0,c.jsx)(s.code,{className:"language-tsx",children:"export default () => {\n  return (\n    <img src={`${process.env.ASSET_PREFIX}/upload/banner.png`}></img>\n  );\n};\n"})})]})}),"\n",(0,c.jsxs)(s.p,{children:["另外，不论是在",(0,c.jsx)(s.a,{href:"/guides/basic-features/html",children:"自定义 HTML"})," 中，或是在 ",(0,c.jsx)(s.a,{href:"/apis/app/hooks/config/public",children:(0,c.jsx)(s.code,{children:"config/public/"})})," 下的任意 HTML 文件中，都可以直接使用 HTML 标签引用 ",(0,c.jsx)(s.code,{children:"config/upload/"})," 目录下的资源："]}),"\n",(0,c.jsx)(s.div,{className:"language-",children:(0,c.jsxs)(s.div,{className:"modern-code-content",children:[(0,c.jsx)(s.button,{className:"copy"}),(0,c.jsx)(s.pre,{className:"code",children:(0,c.jsx)(s.code,{className:"language-html",children:'<script src="/upload/index.js"></script>\n'})})]})}),"\n",(0,c.jsxs)(s.p,{children:["如果设置了 ",(0,c.jsx)(s.a,{href:"/configure/app/dev/asset-prefix",children:(0,c.jsx)(s.code,{children:"dev.assetPrefix"})})," 或 ",(0,c.jsx)(s.a,{href:"/configure/app/output/asset-prefix",children:(0,c.jsx)(s.code,{children:"output.assetPrefix"})})," 前缀，也可以直接使用模板语法添加该前缀："]}),"\n",(0,c.jsx)(s.div,{className:"language-",children:(0,c.jsxs)(s.div,{className:"modern-code-content",children:[(0,c.jsx)(s.button,{className:"copy"}),(0,c.jsx)(s.pre,{className:"code",children:(0,c.jsx)(s.code,{className:"language-html",children:'<script src="<%=assetPrefix %>/upload/index.js"></script>\n'})})]})}),"\n",(0,c.jsxs)(s.div,{className:"modern-directive info",children:[(0,c.jsx)(s.div,{className:"modern-directive-title",children:"INFO"}),(0,c.jsxs)(s.div,{className:"modern-directive-content",children:[(0,c.jsxs)(s.p,{children:["Modern.js 没有支持在 ",(0,c.jsx)(s.code,{children:"config/public/*.css"}),"（例如 background-image）中通过 URL 使用 ",(0,c.jsx)(s.code,{children:"config/upload/"})," 下的文件。"]}),"\n"]})]})]})}var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=Object.assign({},(0,d.useMDXComponents)(),e.components).wrapper;return s?(0,c.jsx)(s,Object.assign({},e,{children:(0,c.jsx)(l,e)})):l(e)}}}]);